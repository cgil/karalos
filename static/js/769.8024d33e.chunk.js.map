{"version":3,"file":"static/js/769.8024d33e.chunk.js","mappings":"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","sources":["routes/admin/admin-page.tsx","routes/common-page.tsx"],"sourcesContent":["import { FC, useEffect, useState } from \"react\";\nimport CommonPage from \"../common-page\";\nimport { ref as firebaseRef } from \"firebase/storage\";\nimport { useUploadFile } from \"react-firebase-hooks/storage\";\nimport { getFirebaseStorageRef } from \"../../utils/firebase-utils/firebase-utils\";\nimport { useDropzone } from \"react-dropzone\";\nimport styled, { useTheme } from \"styled-components\";\nimport { Container, Stack } from \"@mui/system\";\nimport { EditText } from \"react-edit-text\";\nimport \"react-edit-text/dist/index.css\";\nimport ExifReader from \"exifreader\";\n\nimport {\n  Box,\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport { toRem } from \"../../utils/styled-components\";\nimport UploadIcon from \"@mui/icons-material/CloudUpload\";\nimport { LoadingButton } from \"@mui/lab\";\n\ntype FileType = File & {\n  preview: string;\n  Latitude: number | undefined;\n  Longitude: number | undefined;\n};\n\nconst DropzoneContainer = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: ${toRem(20)};\n  border-width: ${toRem(2)};\n  border-radius: ${toRem(2)};\n  border-color: ${(props) => props.theme[\"palette\"].dark};\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  height: ${toRem(200)};\n`;\n\nconst PreviewContainer = styled(Stack)`\n  margin-top: ${toRem(24)};\n`;\n\nconst AdminPage: FC = (): JSX.Element | null => {\n  const theme = useTheme();\n  const storageRef = getFirebaseStorageRef();\n  const [files, setFiles] = useState<FileType[]>([]);\n  const [uploadFile, uploading] = useUploadFile();\n\n  const handleUploadAll = async () => {\n    Promise.allSettled(\n      files.map(async (selectedFile) => {\n        if (selectedFile) {\n          const fileName = selectedFile.name.toLowerCase().replace(/\\s+/g, \"-\");\n          const ref = firebaseRef(storageRef, fileName);\n          return uploadFile(ref, selectedFile, {\n            contentType: `image/${selectedFile.type}`,\n            customMetadata: {\n              Latitude: selectedFile.Latitude?.toString() ?? \"\",\n              Longitude: selectedFile.Longitude?.toString() ?? \"\",\n            },\n          });\n        }\n      })\n    ).then(() => setFiles([]));\n  };\n\n  const { getRootProps, getInputProps, open } = useDropzone({\n    accept: { \"image/*\": [] },\n    onDrop: (acceptedFiles) => {\n      Promise.all(\n        acceptedFiles.map(async (file) => {\n          const fileTags = await ExifReader.load(file, { expanded: true });\n          return Object.assign(file, {\n            preview: URL.createObjectURL(file),\n            Latitude: fileTags.gps?.Latitude,\n            Longitude: fileTags.gps?.Longitude,\n          });\n        })\n      ).then((files) => setFiles(files));\n    },\n  });\n\n  const removeFile = (file: FileType) => () => {\n    const newFiles = [...files];\n    newFiles.splice(newFiles.indexOf(file), 1);\n    setFiles(newFiles);\n  };\n\n  const handleUpdateFileName = (name: string, fileIndex: number) => {\n    let allFiles = [...files];\n    const fileToUpdate: FileType = allFiles[fileIndex];\n    const fileName = (name.substring(0, name.lastIndexOf(\".\")) || name)\n      .replace(/\\s+/g, \"-\")\n      .toLowerCase();\n\n    const fileExtension = fileToUpdate.type.slice(\n      fileToUpdate.type.lastIndexOf(\"/\") + 1\n    );\n\n    const updatedFile = new File(\n      [fileToUpdate],\n      `${fileName}.${fileExtension}`,\n      {\n        type: fileToUpdate.type,\n      }\n    );\n\n    allFiles[fileIndex] = Object.assign(updatedFile, {\n      preview: URL.createObjectURL(updatedFile),\n      Latitude: fileToUpdate.Latitude,\n      Longitude: fileToUpdate.Longitude,\n    });\n    setFiles(allFiles);\n  };\n\n  useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      files.forEach((file) => URL.revokeObjectURL(file.preview));\n    },\n    [files]\n  );\n\n  return (\n    <CommonPage pageName=\"Admin\">\n      <Container maxWidth=\"lg\">\n        <Stack\n          direction=\"row\"\n          justifyContent=\"end\"\n          useFlexGap\n          sx={{ marginBottom: toRem(12) }}\n        >\n          <Tooltip\n            title={files.length > 0 ? null : \"No files added to Upload.\"}\n          >\n            <span>\n              <LoadingButton\n                size=\"medium\"\n                type=\"button\"\n                variant=\"contained\"\n                onClick={handleUploadAll}\n                color=\"secondary\"\n                disabled={!(files.length > 0)}\n                startIcon={<UploadIcon />}\n                loading={uploading}\n                loadingPosition=\"start\"\n              >\n                Upload\n              </LoadingButton>\n            </span>\n          </Tooltip>\n        </Stack>\n        <DropzoneContainer>\n          <div\n            {...getRootProps({ className: \"dropzone\" })}\n            onClick={(e) => e.stopPropagation}\n          >\n            <input {...getInputProps()} />\n            <p>Drag 'n' drop some files here, or click to select images</p>\n            <Stack direction=\"row\" justifyContent=\"center\" useFlexGap>\n              <Button\n                size=\"medium\"\n                type=\"button\"\n                variant=\"contained\"\n                onClick={open}\n              >\n                Add\n              </Button>\n            </Stack>\n          </div>\n        </DropzoneContainer>\n        <PreviewContainer\n          direction=\"row\"\n          alignItems=\"center\"\n          flexWrap=\"wrap\"\n          justifyContent=\"flex-start\"\n          spacing={2}\n          useFlexGap\n        >\n          {files.map((file: FileType, fileIndex: number) => (\n            <Card sx={{ maxWidth: 280, display: \"flex\" }} key={file.name}>\n              <Box\n                sx={{\n                  display: \"flex\",\n                  width: toRem(130),\n                  justifyContent: \"flex-start\",\n                }}\n              >\n                <CardMedia\n                  component=\"img\"\n                  image={file.preview}\n                  alt={file.name}\n                  sx={{\n                    width: \"auto\",\n                    maxWidth: toRem(130),\n                    height: toRem(133),\n                    objectFit: \"cover\",\n                  }}\n                />\n              </Box>\n              <Box\n                sx={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  width: toRem(150),\n                }}\n              >\n                <CardContent sx={{ flex: \"1 0 auto\" }}>\n                  <Typography noWrap variant=\"body2\" color=\"text.secondary\">\n                    Pending upload\n                  </Typography>\n                  <Tooltip title={file.name}>\n                    <Stack direction=\"row\">\n                      <span style={{ width: `calc(100% - ${30}px)` }}>\n                        <EditText\n                          defaultValue={file.name.slice(\n                            0,\n                            file.name.lastIndexOf(\".\")\n                          )}\n                          onSave={(data) =>\n                            handleUpdateFileName(data.value, fileIndex)\n                          }\n                          placeholder=\"Image name\"\n                          style={{\n                            border: `${toRem(1)} solid #ffff`,\n                            paddingLeft: 0,\n                            fontSize: theme[\"typography\"].body1.fontSize,\n                          }}\n                        />\n                      </span>\n                      <Typography\n                        component=\"span\"\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                        style={{ width: toRem(30), lineHeight: toRem(34) }}\n                      >\n                        .{file.type.slice(file.type.lastIndexOf(\"/\") + 1)}\n                      </Typography>\n                    </Stack>\n                  </Tooltip>\n                </CardContent>\n                <CardActions>\n                  <Button\n                    size=\"small\"\n                    color=\"primary\"\n                    onClick={removeFile(file)}\n                  >\n                    Remove Image\n                  </Button>\n                </CardActions>\n              </Box>\n            </Card>\n          ))}\n        </PreviewContainer>\n      </Container>\n    </CommonPage>\n  );\n};\n\nexport default AdminPage;\n","import {\n  Box,\n  Toolbar,\n  IconButton,\n  Typography,\n  Divider,\n  List,\n  Container,\n  ListItemButton,\n  ListItemIcon,\n  ListItemText,\n  styled,\n  Button,\n} from \"@mui/material\";\nimport MuiDrawer from \"@mui/material/Drawer\";\nimport MuiAppBar, { AppBarProps as MuiAppBarProps } from \"@mui/material/AppBar\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\";\nimport CarouselIcon from \"@mui/icons-material/ViewCarousel\";\nimport CollectionsIcon from \"@mui/icons-material/Collections\";\nimport React, { ReactNode } from \"react\";\nimport { FC } from \"react\";\nimport { toRem } from \"../utils/styled-components\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"../hooks/use-auth/use-auth\";\n\ntype CommonPageProps = {\n  children: ReactNode;\n  pageName: string;\n};\n\nconst drawerWidth: number = 240;\n\ninterface AppBarProps extends MuiAppBarProps {\n  open?: boolean;\n}\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n`;\n\nconst AppBar = styled(MuiAppBar, {\n  shouldForwardProp: (prop: string) => prop !== \"open\",\n})<AppBarProps>(({ theme, open }) => ({\n  zIndex: theme[\"zIndex\"].drawer + 1,\n  transition: theme[\"transitions\"].create([\"width\", \"margin\"], {\n    easing: theme[\"transitions\"].easing.sharp,\n    duration: theme[\"transitions\"].duration.leavingScreen,\n  }),\n  borderBottom: 1,\n  ...(open && {\n    marginLeft: `${toRem(drawerWidth)}`,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme[\"transitions\"].create([\"width\", \"margin\"], {\n      easing: theme[\"transitions\"].easing.sharp,\n      duration: theme[\"transitions\"].duration.enteringScreen,\n    }),\n  }),\n}));\n\nconst Drawer = styled(MuiDrawer, {\n  shouldForwardProp: (prop: string) => prop !== \"open\",\n})(({ theme, open }) => ({\n  \"& .MuiDrawer-paper\": {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: `${toRem(drawerWidth)}`,\n    transition: theme[\"transitions\"].create(\"width\", {\n      easing: theme[\"transitions\"].easing.sharp,\n      duration: theme[\"transitions\"].duration.enteringScreen,\n    }),\n    boxSizing: \"border-box\",\n    ...(!open && {\n      overflowX: \"hidden\",\n      transition: theme[\"transitions\"].create(\"width\", {\n        easing: theme[\"transitions\"].easing.sharp,\n        duration: theme[\"transitions\"].duration.leavingScreen,\n      }),\n      width: theme[\"spacing\"](7),\n      [theme[\"breakpoints\"].up(\"sm\")]: {\n        width: theme[\"spacing\"](9),\n      },\n    }),\n  },\n}));\n\nconst CommonPage: FC<CommonPageProps> = (props) => {\n  const auth = useAuth();\n  const [open, setOpen] = React.useState(true);\n  const toggleDrawer = () => {\n    setOpen(!open);\n  };\n\n  return (\n    <Box sx={{ display: \"flex\", backgroundColor: \"white\" }}>\n      <AppBar elevation={0} position=\"absolute\" open={open}>\n        <Toolbar\n          sx={{\n            pr: \"24px\", // keep right padding when drawer closed\n          }}\n        >\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={toggleDrawer}\n            sx={{\n              marginRight: \"36px\",\n              backgroundColor: \"black\",\n              ...(open && { display: \"none\" }),\n            }}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography\n            component=\"h1\"\n            variant=\"h6\"\n            color=\"inherit\"\n            noWrap\n            sx={{ flexGrow: 1, color: \"black\" }}\n          >\n            {props.pageName}\n          </Typography>\n          {auth.user ? (\n            <Button onClick={auth.logout} color=\"primary\">\n              Logout\n            </Button>\n          ) : (\n            <Button component={Link} to=\"/sign-in\" color=\"inherit\">\n              Login\n            </Button>\n          )}\n        </Toolbar>\n      </AppBar>\n      <Drawer elevation={0} variant=\"permanent\" open={open}>\n        <Toolbar\n          sx={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"flex-end\",\n            px: [1],\n          }}\n        >\n          <IconButton onClick={toggleDrawer}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </Toolbar>\n        <Divider />\n        <List component=\"nav\">\n          <React.Fragment>\n            <StyledLink to=\"/\">\n              <ListItemButton>\n                <ListItemIcon>\n                  <CarouselIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Home\" />\n              </ListItemButton>\n            </StyledLink>\n          </React.Fragment>\n          <Divider sx={{ my: 1 }} />\n          <React.Fragment>\n            <StyledLink to=\"/gallery\">\n              <ListItemButton>\n                <ListItemIcon>\n                  <CollectionsIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Gallery\" />\n              </ListItemButton>\n            </StyledLink>\n          </React.Fragment>\n          <Divider sx={{ my: 1 }} />\n        </List>\n      </Drawer>\n      <Box\n        component=\"main\"\n        sx={{\n          backgroundColor: (theme) =>\n            theme.palette.mode === \"light\"\n              ? theme.palette.grey[100]\n              : theme.palette.grey[900],\n          flexGrow: 1,\n          height: \"100vh\",\n          overflow: \"auto\",\n        }}\n      >\n        <Toolbar />\n        <Container maxWidth=\"xl\" sx={{ mt: 4, mb: 4 }}>\n          {props.children}\n        </Container>\n      </Box>\n    </Box>\n  );\n};\n\nexport default CommonPage;\n"],"names":["DropzoneContainer","styled","div","_templateObject","_taggedTemplateLiteral","toRem","props","theme","dark","PreviewContainer","Stack","_templateObject2","useTheme","storageRef","getFirebaseStorageRef","_useState","useState","_useState2","_slicedToArray","files","setFiles","_useUploadFile","useUploadFile","_useUploadFile2","uploadFile","uploading","handleUploadAll","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_context2","prev","next","Promise","allSettled","map","_ref2","_callee","selectedFile","_selectedFile$Latitud","_selectedFile$Latitud2","_selectedFile$Longitu","_selectedFile$Longitu2","fileName","ref","_context","name","toLowerCase","replace","firebaseRef","abrupt","contentType","concat","type","customMetadata","Latitude","toString","Longitude","stop","_x","apply","arguments","then","_useDropzone","useDropzone","accept","onDrop","acceptedFiles","all","_ref3","_callee3","file","_fileTags$gps","_fileTags$gps2","fileTags","_context3","ExifReader","expanded","sent","Object","assign","preview","URL","createObjectURL","gps","_x2","getRootProps","getInputProps","open","removeFile","newFiles","_toConsumableArray","splice","indexOf","useEffect","forEach","revokeObjectURL","_jsx","CommonPage","pageName","children","_jsxs","Container","maxWidth","direction","justifyContent","useFlexGap","sx","marginBottom","Tooltip","title","length","LoadingButton","size","variant","onClick","color","disabled","startIcon","UploadIcon","loading","loadingPosition","_objectSpread","className","e","stopPropagation","Button","alignItems","flexWrap","spacing","fileIndex","Card","display","Box","width","CardMedia","component","image","alt","height","objectFit","flexDirection","CardContent","flex","Typography","noWrap","style","EditText","defaultValue","slice","lastIndexOf","onSave","data","allFiles","fileToUpdate","substring","fileExtension","updatedFile","File","handleUpdateFileName","value","placeholder","border","paddingLeft","fontSize","body1","lineHeight","CardActions","StyledLink","Link","AppBar","MuiAppBar","shouldForwardProp","prop","zIndex","drawer","transition","create","easing","sharp","duration","leavingScreen","borderBottom","marginLeft","enteringScreen","Drawer","MuiDrawer","position","whiteSpace","boxSizing","_defineProperty","overflowX","up","auth","useAuth","_React$useState","React","_React$useState2","setOpen","toggleDrawer","backgroundColor","elevation","Toolbar","pr","IconButton","edge","marginRight","MenuIcon","flexGrow","user","logout","to","px","ChevronLeftIcon","Divider","List","ListItemButton","ListItemIcon","CarouselIcon","ListItemText","primary","my","CollectionsIcon","palette","mode","grey","overflow","mt","mb"],"sourceRoot":""}