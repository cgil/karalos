{"version":3,"file":"static/js/618.d56a01d2.chunk.js","mappings":"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","sources":["routes/common-page.tsx","routes/gallery/gallery-page.tsx","utils/firebase-utils/firebase-utils.ts","utils/firebase-utils/use-loading-value.ts","utils/firebase-utils/use-list-items.ts"],"sourcesContent":["import {\n  Box,\n  Toolbar,\n  IconButton,\n  Typography,\n  Divider,\n  List,\n  Container,\n  ListItemButton,\n  ListItemIcon,\n  ListItemText,\n  styled,\n} from \"@mui/material\";\nimport MuiDrawer from \"@mui/material/Drawer\";\nimport MuiAppBar, { AppBarProps as MuiAppBarProps } from \"@mui/material/AppBar\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport ChevronLeftIcon from \"@mui/icons-material/ChevronLeft\";\nimport CarouselIcon from \"@mui/icons-material/ViewCarousel\";\nimport CollectionsIcon from \"@mui/icons-material/Collections\";\nimport React, { ReactNode } from \"react\";\nimport { FC } from \"react\";\nimport { toRem } from \"../utils/styled-components\";\nimport { Link } from \"react-router-dom\";\n\ntype CommonPageProps = {\n  children: ReactNode;\n  pageName: string;\n};\n\nconst drawerWidth: number = 240;\n\ninterface AppBarProps extends MuiAppBarProps {\n  open?: boolean;\n}\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n`;\n\nconst AppBar = styled(MuiAppBar, {\n  shouldForwardProp: (prop: string) => prop !== \"open\",\n})<AppBarProps>(({ theme, open }) => ({\n  zIndex: theme[\"zIndex\"].drawer + 1,\n  transition: theme[\"transitions\"].create([\"width\", \"margin\"], {\n    easing: theme[\"transitions\"].easing.sharp,\n    duration: theme[\"transitions\"].duration.leavingScreen,\n  }),\n  borderBottom: 1,\n  ...(open && {\n    marginLeft: `${toRem(drawerWidth)}`,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme[\"transitions\"].create([\"width\", \"margin\"], {\n      easing: theme[\"transitions\"].easing.sharp,\n      duration: theme[\"transitions\"].duration.enteringScreen,\n    }),\n  }),\n}));\n\nconst Drawer = styled(MuiDrawer, {\n  shouldForwardProp: (prop: string) => prop !== \"open\",\n})(({ theme, open }) => ({\n  \"& .MuiDrawer-paper\": {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: `${toRem(drawerWidth)}`,\n    transition: theme[\"transitions\"].create(\"width\", {\n      easing: theme[\"transitions\"].easing.sharp,\n      duration: theme[\"transitions\"].duration.enteringScreen,\n    }),\n    boxSizing: \"border-box\",\n    ...(!open && {\n      overflowX: \"hidden\",\n      transition: theme[\"transitions\"].create(\"width\", {\n        easing: theme[\"transitions\"].easing.sharp,\n        duration: theme[\"transitions\"].duration.leavingScreen,\n      }),\n      width: theme[\"spacing\"](7),\n      [theme[\"breakpoints\"].up(\"sm\")]: {\n        width: theme[\"spacing\"](9),\n      },\n    }),\n  },\n}));\n\nconst CommonPage: FC<CommonPageProps> = (props) => {\n  const [open, setOpen] = React.useState(true);\n  const toggleDrawer = () => {\n    setOpen(!open);\n  };\n\n  return (\n    <Box sx={{ display: \"flex\", backgroundColor: \"white\" }}>\n      <AppBar elevation={0} position=\"absolute\" open={open}>\n        <Toolbar\n          sx={{\n            pr: \"24px\", // keep right padding when drawer closed\n          }}\n        >\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={toggleDrawer}\n            sx={{\n              marginRight: \"36px\",\n              backgroundColor: \"black\",\n              ...(open && { display: \"none\" }),\n            }}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography\n            component=\"h1\"\n            variant=\"h6\"\n            color=\"inherit\"\n            noWrap\n            sx={{ flexGrow: 1, color: \"black\" }}\n          >\n            {props.pageName}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer elevation={0} variant=\"permanent\" open={open}>\n        <Toolbar\n          sx={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"flex-end\",\n            px: [1],\n          }}\n        >\n          <IconButton onClick={toggleDrawer}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </Toolbar>\n        <Divider />\n        <List component=\"nav\">\n          <React.Fragment>\n            <StyledLink to=\"/\">\n              <ListItemButton>\n                <ListItemIcon>\n                  <CarouselIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Home\" />\n              </ListItemButton>\n            </StyledLink>\n          </React.Fragment>\n          <Divider sx={{ my: 1 }} />\n          <React.Fragment>\n            <StyledLink to=\"/gallery\">\n              <ListItemButton>\n                <ListItemIcon>\n                  <CollectionsIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Gallery\" />\n              </ListItemButton>\n            </StyledLink>\n          </React.Fragment>\n          <Divider sx={{ my: 1 }} />\n        </List>\n      </Drawer>\n      <Box\n        component=\"main\"\n        sx={{\n          backgroundColor: (theme) =>\n            theme.palette.mode === \"light\"\n              ? theme.palette.grey[100]\n              : theme.palette.grey[900],\n          flexGrow: 1,\n          height: \"100vh\",\n          overflow: \"auto\",\n        }}\n      >\n        <Toolbar />\n        <Container maxWidth=\"xl\" sx={{ mt: 4, mb: 4 }}>\n          {props.children}\n        </Container>\n      </Box>\n    </Box>\n  );\n};\n\nexport default CommonPage;\n","import { FC } from \"react\";\nimport CommonPage from \"../common-page\";\nimport { getFirebaseStorage } from \"../../utils/firebase-utils/firebase-utils\";\nimport { Box, ImageList, ImageListItem } from \"@mui/material\";\nimport useListItems from \"../../utils/firebase-utils/use-list-items\";\nimport styled from \"styled-components\";\nimport { toRem } from \"../../utils/styled-components\";\n\nconst StyledImageListItem = styled(ImageListItem)`\n  & .MuiImageListItem-img {\n    border-radius: ${toRem(10)};\n  }\n`;\n\nconst useGalleryPage = () => {\n  const firebaseStorage = getFirebaseStorage();\n  const [photoList, photoListLoading] = useListItems(firebaseStorage);\n\n  return { photoList, photoListLoading };\n};\n\nconst GalleryPage: FC = (): JSX.Element | null => {\n  const controller = useGalleryPage();\n  if (controller.photoListLoading) {\n    return null;\n  }\n\n  return (\n    <CommonPage pageName=\"Gallery\">\n      <Box sx={{ width: \"100%\", height: \"100%\", overflowY: \"scroll\" }}>\n        <ImageList variant=\"masonry\" cols={3} gap={12}>\n          {(controller.photoList ?? []).map((item) => (\n            <StyledImageListItem key={item.url}>\n              <img\n                src={`${item.url}?w=248&fit=crop&auto=format`}\n                srcSet={`${item.url}?w=248&fit=crop&auto=format&dpr=2 2x`}\n                alt={\"\"}\n                loading=\"lazy\"\n              />\n            </StyledImageListItem>\n          ))}\n        </ImageList>\n      </Box>\n    </CommonPage>\n  );\n};\n\nexport default GalleryPage;\n","import { StorageReference, getStorage, ref } from \"firebase/storage\";\n\nexport const getFirebaseStorage = (url?: string): StorageReference => {\n  return ref(getStorage(), url ?? \"images\");\n};\n","import { useCallback, useMemo, useReducer } from \"react\";\n\nexport type LoadingValue<T, E> = {\n  error?: E;\n  loading: boolean;\n  reset: () => void;\n  setError: (error: E) => void;\n  setValue: (value?: T) => void;\n  value?: T;\n};\n\ntype ReducerState<E> = {\n  error?: E;\n  loading: boolean;\n  value?: any;\n};\n\ntype ErrorAction<E> = { type: \"error\"; error: E };\ntype ResetAction = { type: \"reset\"; defaultValue?: any };\ntype ValueAction = { type: \"value\"; value: any };\ntype ReducerAction<E> = ErrorAction<E> | ResetAction | ValueAction;\n\nconst defaultState = (defaultValue?: any) => {\n  return {\n    loading: defaultValue === undefined || defaultValue === null,\n    value: defaultValue,\n  };\n};\n\nconst reducer =\n  <E>() =>\n  (state: ReducerState<E>, action: ReducerAction<E>): ReducerState<E> => {\n    switch (action.type) {\n      case \"error\":\n        return {\n          ...state,\n          error: action.error,\n          loading: false,\n          value: undefined,\n        };\n      case \"reset\":\n        return defaultState(action.defaultValue);\n      case \"value\":\n        return {\n          ...state,\n          error: undefined,\n          loading: false,\n          value: action.value,\n        };\n      default:\n        return state;\n    }\n  };\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default <T, E>(getDefaultValue?: () => T): LoadingValue<T, E> => {\n  const defaultValue = getDefaultValue ? getDefaultValue() : undefined;\n  const [state, dispatch] = useReducer(\n    reducer<E>(),\n    defaultState(defaultValue)\n  );\n\n  const reset = useCallback(() => {\n    const defaultValue = getDefaultValue ? getDefaultValue() : undefined;\n    dispatch({ type: \"reset\", defaultValue });\n  }, [getDefaultValue]);\n\n  const setError = useCallback((error: E) => {\n    dispatch({ type: \"error\", error });\n  }, []);\n\n  const setValue = useCallback((value?: T) => {\n    dispatch({ type: \"value\", value });\n  }, []);\n\n  return useMemo(\n    () => ({\n      error: state.error,\n      loading: state.loading,\n      reset,\n      setError,\n      setValue,\n      value: state.value,\n    }),\n    [state.error, state.loading, reset, setError, setValue, state.value]\n  );\n};\n","import {\n  getDownloadURL,\n  list,\n  StorageError,\n  StorageReference,\n} from \"firebase/storage\";\nimport { useEffect, useRef } from \"react\";\nimport useLoadingValue from \"./use-loading-value\";\n\nexport type ListItem = {\n  url: string;\n};\nexport type LoadingHook<T, E> = [T | undefined, boolean, E | undefined];\nexport type ListItemsHook = LoadingHook<ListItem[], StorageError>;\n\nexport type RefHook<T> = {\n  current: T;\n};\n\nexport const useComparatorRef = <T>(\n  value: T | null | undefined,\n  isEqual: (v1: T | null | undefined, v2: T | null | undefined) => boolean,\n  onChange?: () => void\n): RefHook<T | null | undefined> => {\n  const ref = useRef(value);\n  useEffect(() => {\n    if (!isEqual(value, ref.current)) {\n      ref.current = value;\n      if (onChange) {\n        onChange();\n      }\n    }\n  });\n  return ref;\n};\n\nconst isEqual = (\n  v1: StorageReference | null | undefined,\n  v2: StorageReference | null | undefined\n): boolean => {\n  const bothNull: boolean = !v1 && !v2;\n  const equal: boolean = !!v1 && !!v2 && v1.fullPath === v2.fullPath;\n  return bothNull || equal;\n};\n\nconst useListItems = (storageRef?: StorageReference | null): ListItemsHook => {\n  const { error, loading, reset, setError, setValue, value } = useLoadingValue<\n    ListItem[],\n    StorageError\n  >();\n  const ref = useComparatorRef(storageRef, isEqual, reset);\n\n  useEffect(() => {\n    if (!ref.current) {\n      setValue(undefined);\n      return;\n    }\n    list(ref.current)\n      .then((listResult) =>\n        Promise.all(listResult.items.map((item) => getDownloadURL(item)))\n      )\n      .then((urls) => {\n        setValue(\n          urls.map((url) => ({\n            url,\n          }))\n        );\n      })\n      .catch(setError);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ref.current]);\n\n  return [value, loading, error];\n};\n\nexport default useListItems;\n"],"names":["StyledLink","styled","Link","_templateObject","_taggedTemplateLiteral","AppBar","MuiAppBar","shouldForwardProp","prop","_ref","theme","open","_objectSpread","zIndex","drawer","transition","create","easing","sharp","duration","leavingScreen","borderBottom","marginLeft","concat","toRem","width","enteringScreen","Drawer","MuiDrawer","_ref2","position","whiteSpace","boxSizing","_defineProperty","overflowX","up","props","_React$useState","React","_React$useState2","_slicedToArray","setOpen","toggleDrawer","_jsxs","Box","sx","display","backgroundColor","children","_jsx","elevation","Toolbar","pr","IconButton","edge","color","onClick","marginRight","MenuIcon","Typography","component","variant","noWrap","flexGrow","pageName","alignItems","justifyContent","px","ChevronLeftIcon","Divider","List","to","ListItemButton","ListItemIcon","CarouselIcon","ListItemText","primary","my","CollectionsIcon","palette","mode","grey","height","overflow","Container","maxWidth","mt","mb","StyledImageListItem","ImageListItem","_controller$photoList","controller","firebaseStorage","getFirebaseStorage","_useListItems","useListItems","_useListItems2","photoList","photoListLoading","useGalleryPage","CommonPage","overflowY","ImageList","cols","gap","map","item","src","url","srcSet","alt","loading","ref","getStorage","defaultState","defaultValue","undefined","value","getDefaultValue","_useReducer","useReducer","state","action","type","error","_useReducer2","dispatch","reset","useCallback","setError","setValue","useMemo","isEqual","v1","v2","bothNull","equal","fullPath","storageRef","_useLoadingValue","useLoadingValue","onChange","useRef","useEffect","current","useComparatorRef","list","then","listResult","Promise","all","items","getDownloadURL","urls","catch"],"sourceRoot":""}