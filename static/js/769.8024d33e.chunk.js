"use strict";(self.webpackChunkkaralos=self.webpackChunkkaralos||[]).push([[769],{4144:function(n,e,t){t.r(e);var r,i,o=t(1413),a=t(3433),s=t(4165),c=t(5861),l=t(9439),d=t(168),u=t(2791),p=t(7726),x=t(276),h=t(4082),f=t(5617),g=t(8267),m=t(4912),Z=t(9369),j=t(6598),v=t(49),y=(t(9323),t(9503)),w=t(7639),b=t(5849),k=t(8588),L=t(4554),C=t(1867),V=t(2492),P=t(4567),S=t(7234),I=t(1849),O=t(9596),U=t(9709),z=t(184),F=m.default.div(r||(r=(0,d.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: ",";\n  border-width: ",";\n  border-radius: ",";\n  border-color: ",";\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  height: ",";\n"])),(0,I.V)(20),(0,I.V)(2),(0,I.V)(2),(function(n){return n.theme.palette.dark}),(0,I.V)(200)),R=(0,m.default)(Z.Z)(i||(i=(0,d.Z)(["\n  margin-top: ",";\n"])),(0,I.V)(24));e.default=function(){var n=(0,m.useTheme)(),e=(0,f.eh)(),t=(0,u.useState)([]),r=(0,l.Z)(t,2),i=r[0],d=r[1],W=(0,h.k)(),G=(0,l.Z)(W,2),D=G[0],N=G[1],H=function(){var n=(0,c.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Promise.allSettled(i.map(function(){var n=(0,c.Z)((0,s.Z)().mark((function n(t){var r,i,o,a,c,l;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=4;break}return c=t.name.toLowerCase().replace(/\s+/g,"-"),l=(0,x.iH)(e,c),n.abrupt("return",D(l,t,{contentType:"image/".concat(t.type),customMetadata:{Latitude:null!==(r=null===(i=t.Latitude)||void 0===i?void 0:i.toString())&&void 0!==r?r:"",Longitude:null!==(o=null===(a=t.Longitude)||void 0===a?void 0:a.toString())&&void 0!==o?o:""}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())).then((function(){return d([])}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),A=(0,g.uI)({accept:{"image/*":[]},onDrop:function(n){Promise.all(n.map(function(){var n=(0,c.Z)((0,s.Z)().mark((function n(e){var t,r,i;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.ZP.load(e,{expanded:!0});case 2:return i=n.sent,n.abrupt("return",Object.assign(e,{preview:URL.createObjectURL(e),Latitude:null===(t=i.gps)||void 0===t?void 0:t.Latitude,Longitude:null===(r=i.gps)||void 0===r?void 0:r.Longitude}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())).then((function(n){return d(n)}))}}),B=A.getRootProps,E=A.getInputProps,M=A.open,T=function(n){return function(){var e=(0,a.Z)(i);e.splice(e.indexOf(n),1),d(e)}};return(0,u.useEffect)((function(){return function(){i.forEach((function(n){return URL.revokeObjectURL(n.preview)}))}}),[i]),(0,z.jsx)(p.Z,{pageName:"Admin",children:(0,z.jsxs)(j.Z,{maxWidth:"lg",children:[(0,z.jsx)(Z.Z,{direction:"row",justifyContent:"end",useFlexGap:!0,sx:{marginBottom:(0,I.V)(12)},children:(0,z.jsx)(w.Z,{title:i.length>0?null:"No files added to Upload.",children:(0,z.jsx)("span",{children:(0,z.jsx)(U.Z,{size:"medium",type:"button",variant:"contained",onClick:H,color:"secondary",disabled:!(i.length>0),startIcon:(0,z.jsx)(O.Z,{}),loading:N,loadingPosition:"start",children:"Upload"})})})}),(0,z.jsx)(F,{children:(0,z.jsxs)("div",(0,o.Z)((0,o.Z)({},B({className:"dropzone"})),{},{onClick:function(n){return n.stopPropagation},children:[(0,z.jsx)("input",(0,o.Z)({},E())),(0,z.jsx)("p",{children:"Drag 'n' drop some files here, or click to select images"}),(0,z.jsx)(Z.Z,{direction:"row",justifyContent:"center",useFlexGap:!0,children:(0,z.jsx)(b.Z,{size:"medium",type:"button",variant:"contained",onClick:M,children:"Add"})})]}))}),(0,z.jsx)(R,{direction:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-start",spacing:2,useFlexGap:!0,children:i.map((function(e,t){return(0,z.jsxs)(k.Z,{sx:{maxWidth:280,display:"flex"},children:[(0,z.jsx)(L.Z,{sx:{display:"flex",width:(0,I.V)(130),justifyContent:"flex-start"},children:(0,z.jsx)(C.Z,{component:"img",image:e.preview,alt:e.name,sx:{width:"auto",maxWidth:(0,I.V)(130),height:(0,I.V)(133),objectFit:"cover"}})}),(0,z.jsxs)(L.Z,{sx:{display:"flex",flexDirection:"column",width:(0,I.V)(150)},children:[(0,z.jsxs)(V.Z,{sx:{flex:"1 0 auto"},children:[(0,z.jsx)(P.Z,{noWrap:!0,variant:"body2",color:"text.secondary",children:"Pending upload"}),(0,z.jsx)(w.Z,{title:e.name,children:(0,z.jsxs)(Z.Z,{direction:"row",children:[(0,z.jsx)("span",{style:{width:"calc(100% - ".concat(30,"px)")},children:(0,z.jsx)(v.y,{defaultValue:e.name.slice(0,e.name.lastIndexOf(".")),onSave:function(n){return function(n,e){var t=(0,a.Z)(i),r=t[e],o=(n.substring(0,n.lastIndexOf("."))||n).replace(/\s+/g,"-").toLowerCase(),s=r.type.slice(r.type.lastIndexOf("/")+1),c=new File([r],"".concat(o,".").concat(s),{type:r.type});t[e]=Object.assign(c,{preview:URL.createObjectURL(c),Latitude:r.Latitude,Longitude:r.Longitude}),d(t)}(n.value,t)},placeholder:"Image name",style:{border:"".concat((0,I.V)(1)," solid #ffff"),paddingLeft:0,fontSize:n.typography.body1.fontSize}})}),(0,z.jsxs)(P.Z,{component:"span",variant:"body2",color:"text.secondary",style:{width:(0,I.V)(30),lineHeight:(0,I.V)(34)},children:[".",e.type.slice(e.type.lastIndexOf("/")+1)]})]})})]}),(0,z.jsx)(S.Z,{children:(0,z.jsx)(b.Z,{size:"small",color:"primary",onClick:T(e),children:"Remove Image"})})]})]},e.name)}))})]})})}},7726:function(n,e,t){var r,i=t(9439),o=t(4942),a=t(1413),s=t(168),c=t(6934),l=t(4554),d=t(9464),u=t(977),p=t(4567),x=t(5849),h=t(4721),f=t(3236),g=t(6278),m=t(7064),Z=t(9900),j=t(266),v=t(8654),y=t(5256),w=t(8008),b=t(1009),k=t(609),L=t(1334),C=t(2791),V=t(1849),P=t(1087),S=t(6929),I=t(184),O=(0,c.ZP)(P.rU)(r||(r=(0,s.Z)(["\n  text-decoration: none;\n  color: inherit;\n"]))),U=(0,c.ZP)(y.Z,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return(0,a.Z)({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),borderBottom:1},t&&{marginLeft:"".concat((0,V.V)(240)),width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})})),z=(0,c.ZP)(v.ZP,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return{"& .MuiDrawer-paper":(0,a.Z)({position:"relative",whiteSpace:"nowrap",width:"".concat((0,V.V)(240)),transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),boxSizing:"border-box"},!t&&(0,o.Z)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}))}}));e.Z=function(n){var e=(0,S.a)(),t=C.useState(!0),r=(0,i.Z)(t,2),o=r[0],s=r[1],c=function(){s(!o)};return(0,I.jsxs)(l.Z,{sx:{display:"flex",backgroundColor:"white"},children:[(0,I.jsx)(U,{elevation:0,position:"absolute",open:o,children:(0,I.jsxs)(d.Z,{sx:{pr:"24px"},children:[(0,I.jsx)(u.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:c,sx:(0,a.Z)({marginRight:"36px",backgroundColor:"black"},o&&{display:"none"}),children:(0,I.jsx)(w.Z,{})}),(0,I.jsx)(p.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1,color:"black"},children:n.pageName}),e.user?(0,I.jsx)(x.Z,{onClick:e.logout,color:"primary",children:"Logout"}):(0,I.jsx)(x.Z,{component:P.rU,to:"/sign-in",color:"inherit",children:"Login"})]})}),(0,I.jsxs)(z,{elevation:0,variant:"permanent",open:o,children:[(0,I.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,I.jsx)(u.Z,{onClick:c,children:(0,I.jsx)(b.Z,{})})}),(0,I.jsx)(h.Z,{}),(0,I.jsxs)(f.Z,{component:"nav",children:[(0,I.jsx)(C.Fragment,{children:(0,I.jsx)(O,{to:"/",children:(0,I.jsxs)(g.Z,{children:[(0,I.jsx)(m.Z,{children:(0,I.jsx)(k.Z,{})}),(0,I.jsx)(Z.Z,{primary:"Home"})]})})}),(0,I.jsx)(h.Z,{sx:{my:1}}),(0,I.jsx)(C.Fragment,{children:(0,I.jsx)(O,{to:"/gallery",children:(0,I.jsxs)(g.Z,{children:[(0,I.jsx)(m.Z,{children:(0,I.jsx)(L.Z,{})}),(0,I.jsx)(Z.Z,{primary:"Gallery"})]})})}),(0,I.jsx)(h.Z,{sx:{my:1}})]})]}),(0,I.jsxs)(l.Z,{component:"main",sx:{backgroundColor:function(n){return"light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,I.jsx)(d.Z,{}),(0,I.jsx)(j.Z,{maxWidth:"xl",sx:{mt:4,mb:4},children:n.children})]})]})}}}]);
//# sourceMappingURL=769.8024d33e.chunk.js.map