"use strict";(self.webpackChunkkaralos=self.webpackChunkkaralos||[]).push([[81],{3541:function(n,e,t){t.d(e,{l:function(){return f}});var r=t(1413),i=t(1474),o=t(9164),a=t(4841),s=t(9347),l=t(4554),c=t(7689),d=t(1087),u=t(1849),p=t(6819),x=t(184),h=function(n){return(0,x.jsx)(i.Z,(0,r.Z)((0,r.Z)({},n),{},{component:d.rU,to:"../".concat(n.value)}))},f=function(n){var e=(0,c.bS)(p.XA.admin),t=null===e||void 0===e?void 0:e.params["*"];return(0,x.jsx)(o.Z,{maxWidth:!1,disableGutters:!0,children:(0,x.jsxs)(a.Z,{elevation:1,sx:{bgcolor:function(n){return"".concat(n.palette.background.default," !important")}},children:[(0,x.jsxs)(s.Z,{sx:{px:(0,u.V)(24),pt:(0,u.V)(12)},value:t,children:[(0,x.jsx)(h,{label:"Upload",value:p.XA.adminUpload}),(0,x.jsx)(h,{label:"Manage",value:p.XA.adminManage})]}),(0,x.jsx)(l.Z,{p:4,children:n.children})]})})}},6387:function(n,e,t){t.r(e);var r,i,o=t(1413),a=t(3433),s=t(4165),l=t(5861),c=t(9439),d=t(168),u=t(2791),p=t(7726),x=t(276),h=t(4082),f=t(5617),g=t(8267),Z=t(4912),m=t(9369),j=t(49),v=(t(9323),t(9503)),b=t(7639),y=t(5849),w=t(8588),k=t(4554),L=t(1867),C=t(2492),V=t(4567),S=t(7234),P=t(1849),U=t(9596),I=t(9709),O=t(3541),z=t(184),F=Z.default.div(r||(r=(0,d.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: ",";\n  border-width: ",";\n  border-radius: ",";\n  border-color: ",";\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #bdbdbd;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  height: ",";\n"])),(0,P.V)(20),(0,P.V)(2),(0,P.V)(2),(function(n){return n.theme.palette.dark}),(0,P.V)(200)),R=(0,Z.default)(m.Z)(i||(i=(0,d.Z)(["\n  margin-top: ",";\n"])),(0,P.V)(24));e.default=function(){var n=(0,Z.useTheme)(),e=(0,f.eh)(),t=(0,u.useState)([]),r=(0,c.Z)(t,2),i=r[0],d=r[1],G=(0,h.k)(),W=(0,c.Z)(G,2),A=W[0],D=W[1],M=(0,u.useCallback)((0,l.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Promise.allSettled(i.map(function(){var n=(0,l.Z)((0,s.Z)().mark((function n(t){var r,i,o,a,l,c;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=4;break}return l=t.name.toLowerCase().replace(/\s+/g,"-"),c=(0,x.iH)(e,l),n.abrupt("return",A(c,t,{contentType:"image/".concat(t.type),customMetadata:{Latitude:null!==(r=null===(i=t.Latitude)||void 0===i?void 0:i.toString())&&void 0!==r?r:"",Longitude:null!==(o=null===(a=t.Longitude)||void 0===a?void 0:a.toString())&&void 0!==o?o:""}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())).then((function(){return d([])}));case 1:case"end":return n.stop()}}),n)}))),[i,e,A]),N=(0,g.uI)({accept:{"image/*":[]},onDrop:function(n){Promise.all(n.map(function(){var n=(0,l.Z)((0,s.Z)().mark((function n(e){var t,r,i;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.ZP.load(e,{expanded:!0});case 2:return i=n.sent,n.abrupt("return",Object.assign(e,{preview:URL.createObjectURL(e),Latitude:null===(t=i.gps)||void 0===t?void 0:t.Latitude,Longitude:null===(r=i.gps)||void 0===r?void 0:r.Longitude}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())).then((function(n){return d(n)}))}}),X=N.getRootProps,H=N.getInputProps,B=N.open,E=(0,u.useCallback)((function(n){return function(){var e=(0,a.Z)(i);e.splice(e.indexOf(n),1),d(e)}}),[i]),T=(0,u.useCallback)((function(n,e){var t=(0,a.Z)(i),r=t[e],o=(n.substring(0,n.lastIndexOf("."))||n).replace(/\s+/g,"-").toLowerCase(),s=r.type.slice(r.type.lastIndexOf("/")+1),l=new File([r],"".concat(o,".").concat(s),{type:r.type});t[e]=Object.assign(l,{preview:URL.createObjectURL(l),Latitude:r.Latitude,Longitude:r.Longitude}),d(t)}),[i]);return(0,u.useEffect)((function(){return function(){i.forEach((function(n){return URL.revokeObjectURL(n.preview)}))}}),[i]),(0,z.jsx)(p.Z,{pageName:"Upload",children:(0,z.jsxs)(O.l,{children:[(0,z.jsx)(m.Z,{direction:"row",justifyContent:"end",useFlexGap:!0,sx:{marginBottom:(0,P.V)(12)},children:(0,z.jsx)(b.Z,{title:i.length>0?null:"No files added to Upload.",children:(0,z.jsx)("span",{children:(0,z.jsx)(I.Z,{size:"medium",type:"button",variant:"contained",onClick:M,color:"secondary",disabled:!(i.length>0),startIcon:(0,z.jsx)(U.Z,{}),loading:D,loadingPosition:"start",children:"Upload"})})})}),(0,z.jsx)(F,{children:(0,z.jsxs)("div",(0,o.Z)((0,o.Z)({},X({className:"dropzone"})),{},{onClick:function(n){return n.stopPropagation},children:[(0,z.jsx)("input",(0,o.Z)({},H())),(0,z.jsx)("p",{children:"Drag 'n' drop some files here, or click to select images"}),(0,z.jsx)(m.Z,{direction:"row",justifyContent:"center",useFlexGap:!0,children:(0,z.jsx)(y.Z,{size:"medium",type:"button",variant:"contained",onClick:B,children:"Add"})})]}))}),(0,z.jsx)(R,{direction:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-start",spacing:2,useFlexGap:!0,children:i.map((function(e,t){return(0,z.jsxs)(w.Z,{sx:{maxWidth:280,display:"flex"},children:[(0,z.jsx)(k.Z,{sx:{display:"flex",width:(0,P.V)(130),justifyContent:"flex-start"},children:(0,z.jsx)(L.Z,{component:"img",image:e.preview,alt:e.name,sx:{width:"auto",maxWidth:(0,P.V)(130),height:(0,P.V)(133),objectFit:"cover"}})}),(0,z.jsxs)(k.Z,{sx:{display:"flex",flexDirection:"column",width:(0,P.V)(150)},children:[(0,z.jsxs)(C.Z,{sx:{flex:"1 0 auto"},children:[(0,z.jsx)(V.Z,{noWrap:!0,variant:"body2",color:"text.secondary",children:"Pending upload"}),(0,z.jsx)(b.Z,{title:e.name,children:(0,z.jsxs)(m.Z,{direction:"row",children:[(0,z.jsx)("span",{style:{width:"calc(100% - ".concat(30,"px)")},children:(0,z.jsx)(j.y,{defaultValue:e.name.slice(0,e.name.lastIndexOf(".")),onSave:function(n){return T(n.value,t)},placeholder:"Image name",style:{border:"".concat((0,P.V)(1)," solid #ffff"),paddingLeft:0,fontSize:n.typography.body1.fontSize}})}),(0,z.jsxs)(V.Z,{component:"span",variant:"body2",color:"text.secondary",style:{width:(0,P.V)(30),lineHeight:(0,P.V)(34)},children:[".",e.type.slice(e.type.lastIndexOf("/")+1)]})]})})]}),(0,z.jsx)(S.Z,{children:(0,z.jsx)(y.Z,{size:"small",color:"primary",onClick:E(e),children:"Remove Image"})})]})]},e.name)}))})]})})}},7726:function(n,e,t){var r,i=t(9439),o=t(4942),a=t(1413),s=t(168),l=t(6934),c=t(4554),d=t(9464),u=t(977),p=t(4567),x=t(5849),h=t(4721),f=t(3236),g=t(6278),Z=t(7064),m=t(9900),j=t(9164),v=t(8654),b=t(5256),y=t(8008),w=t(1009),k=t(609),L=t(1334),C=t(2791),V=t(1849),S=t(1087),P=t(6929),U=t(184),I=(0,l.ZP)(S.rU)(r||(r=(0,s.Z)(["\n  text-decoration: none;\n  color: inherit;\n"]))),O=(0,l.ZP)(b.Z,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return(0,a.Z)({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),borderBottom:1},t&&{marginLeft:"".concat((0,V.V)(240)),width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})})),z=(0,l.ZP)(v.ZP,{shouldForwardProp:function(n){return"open"!==n}})((function(n){var e=n.theme,t=n.open;return{"& .MuiDrawer-paper":(0,a.Z)({position:"relative",whiteSpace:"nowrap",width:"".concat((0,V.V)(240)),transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),boxSizing:"border-box"},!t&&(0,o.Z)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}))}}));e.Z=function(n){var e=(0,P.a)(),t=C.useState(!0),r=(0,i.Z)(t,2),o=r[0],s=r[1],l=function(){s(!o)};return(0,U.jsxs)(c.Z,{sx:{display:"flex",backgroundColor:"white"},children:[(0,U.jsx)(O,{elevation:0,position:"absolute",open:o,children:(0,U.jsxs)(d.Z,{sx:{pr:"24px"},children:[(0,U.jsx)(u.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:l,sx:(0,a.Z)({marginRight:"36px",backgroundColor:"black"},o&&{display:"none"}),children:(0,U.jsx)(y.Z,{})}),(0,U.jsx)(p.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1,color:"black"},children:n.pageName}),e.user?(0,U.jsx)(x.Z,{onClick:e.logout,color:"primary",children:"Logout"}):(0,U.jsx)(x.Z,{component:S.rU,to:"/sign-in",color:"inherit",children:"Login"})]})}),(0,U.jsxs)(z,{elevation:0,variant:"permanent",open:o,children:[(0,U.jsx)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,U.jsx)(u.Z,{onClick:l,children:(0,U.jsx)(w.Z,{})})}),(0,U.jsx)(h.Z,{}),(0,U.jsxs)(f.Z,{component:"nav",children:[(0,U.jsx)(C.Fragment,{children:(0,U.jsx)(I,{to:"/",children:(0,U.jsxs)(g.Z,{children:[(0,U.jsx)(Z.Z,{children:(0,U.jsx)(k.Z,{})}),(0,U.jsx)(m.Z,{primary:"Home"})]})})}),(0,U.jsx)(h.Z,{sx:{my:1}}),(0,U.jsx)(C.Fragment,{children:(0,U.jsx)(I,{to:"/gallery",children:(0,U.jsxs)(g.Z,{children:[(0,U.jsx)(Z.Z,{children:(0,U.jsx)(L.Z,{})}),(0,U.jsx)(m.Z,{primary:"Gallery"})]})})}),(0,U.jsx)(h.Z,{sx:{my:1}})]})]}),(0,U.jsxs)(c.Z,{component:"main",sx:{backgroundColor:function(n){return"light"===n.palette.mode?n.palette.grey[100]:n.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,U.jsx)(d.Z,{}),(0,U.jsx)(j.Z,{maxWidth:"xl",sx:{mt:4,mb:4},children:n.children})]})]})}}}]);
//# sourceMappingURL=81.a126f6b5.chunk.js.map